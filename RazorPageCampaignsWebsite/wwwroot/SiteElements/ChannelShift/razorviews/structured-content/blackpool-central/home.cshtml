@{

    // Name: Channel Shift - Structured Content (Content types)
    // Developer: Asif Nissar
    // License: Blackpool council
    // Date: 03/12/2017
}
@using Contensis.Framework.Web
@using Newtonsoft.Json
@using Zengenti.Contensis.Delivery;
@using Zengenti.Data;

@using Blackpool.Zengenti.CMS.Constants;
@using Blackpool.Zengenti.CMS.Common;
@using Blackpool.Zengenti.CMS.Modules.Configuration;
@using Blackpool.Zengenti.CMS.Helpers;
@using Blackpool.Zengenti.CMS.Models.Components;
@using Blackpool.Zengenti.CMS.Models.BlackpoolCentral;
@using Blackpool.Zengenti.CMS.Models.Components;
@using Blackpool.Zengenti.CMS.Models.GenericTypes;


@{
    BlackpoolCentralDTO DTOModel = Page.Model;
    string partial = "image-header-box.cshtml";
}


@RenderPage(String.Format("{0}{1}", DTOModel.RazorViewPath + "partials/", partial), new { Model = DTOModel })

@foreach (SerialisedContent item in DTOModel.Flow.GetContent)
{
     partial = string.Empty;
     string className  = item.Items[0].ClassName;
     string containerType = item.Items[0].ContainerType;
     <strong style="display:none;">@className</strong>
    switch (className)
    {
          case "ImageBox":
            partial = "image-box.cshtml";
            @RenderPage(String.Format("{0}{1}", DTOModel.RazorViewPath + "partials/", partial), new { Model = DTOModel, ImageBox = item.Items })
            break;
        case "ContentBox":
            partial = "markup.cshtml";
            @RenderPage(String.Format("{0}{1}", DTOModel.RazorViewPath + "partials/", partial), new { Model = DTOModel, Markup = item.Items })
            break;
        case "CTALink":
            partial = "cta-link.cshtml";
            @RenderPage(String.Format("{0}{1}", DTOModel.RazorViewPath + "partials/", partial), new { Model = DTOModel, CTA = item.Items })
            break;
        case "Video":
            partial = "video.cshtml";
            @RenderPage(String.Format("{0}{1}", DTOModel.RazorViewPath + "partials/", partial), new { Model = DTOModel, Video = item.Items })
            break;
      
        default:
            break;
    }
}