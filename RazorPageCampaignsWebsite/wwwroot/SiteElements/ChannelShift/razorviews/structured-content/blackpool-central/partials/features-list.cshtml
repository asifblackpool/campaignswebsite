@{

    // Name: Channel Shift - Structured Content (Content types)
    // Developer: Asif Nissar
    // Name: footer razor view - render the general (generic) page
    // License: Blackpool council
    // Date: 21/02/2018

}

@using System;
@using System.Collections;
@using Contensis.Framework.Web
@using Newtonsoft.Json
@using Zengenti.Contensis.Delivery;
@using Zengenti.Data;

@using Blackpool.Zengenti.CMS.Common;
@using Blackpool.Zengenti.CMS.Modules.Configuration;
@using Blackpool.Zengenti.CMS.Helpers;
@using Blackpool.Zengenti.CMS.Models.BlackpoolCentral
@using Blackpool.Zengenti.CMS.Models.GenericTypes;
@using Blackpool.Zengenti.CMS.Models.Components;


@{
    BlackpoolCentralDTO DTO = Page.Model;
    List<SerialisedItem> SerailisedList = Page.Features;
    List<BlackpoolCentralComponent> components = new List<BlackpoolCentralComponent>();

    if (SerailisedList != null)
    {
        foreach (SerialisedItem si in SerailisedList)
        {
            BlackpoolCentralComponent temp = SerializeHelper.Deseralize(si) as BlackpoolCentralComponent;
            if (temp.IsActive)
            {
                components.Add(temp);
            }

        }
    }
}

<div class="bottom-spacer">
@if (components.Count > 0) {
  
    foreach (var item in components)
    {
      string ImageUrl = DTO.NoImageUrl;
      if (item != null){
         if (item.Image != null && item.Image.Asset != null){ ImageUrl = item.Image.Asset.Uri.ToString();}
      }
    <div class="features-item clearfix">
     <div class="row zero-pad-all clearfix">
        <div class="col-md-12 col-sm-12">
         <h2 style="font-weight:normal; margin-top:0px;">@item.Title</h2>
         </div>
     </div>
     <div class="row equal zero-margin-all zero-pad-all clearfix">
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 zero-pad-all">
         @Html.Raw(item.Information)
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 zero-pad-all">
            <img src="@string.Format("{0}{1}", DTO.BaseImageUrl, ImageUrl)" title="@item.Image.AltText" class="img-responsive" >
        </div>
     </div>
    </div>
    }
}
</div>

